# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=mos -mcpu=mos65c02 -run-pass=instruction-select -verify-machineinstrs -o - %s | FileCheck %s
--- |
  define void @br_indirect_abs_idx() {
    entry:
      ret void
  }
---
name: br_indirect_abs_idx
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: br_indirect_abs_idx
    ; CHECK: %0:imag16, early-clobber %2:gpr = LDImm16 blockaddress(@br_indirect_abs_idx, %ir-block.entry)
    ; CHECK-NEXT: [[LDImm:%[0-9]+]]:xc = LDImm 2
    ; CHECK-NEXT: JMPIdxIndir %0, [[LDImm]]
    ; CHECK-NEXT: RTS
    %0:any(p0) = G_BLOCK_ADDR blockaddress(@br_indirect_abs_idx, %ir-block.entry)
    %1:any(s8) = G_CONSTANT i8 2
    G_BRINDIRECT_IDX %0, %1
    RTS
...
